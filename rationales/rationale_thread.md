# Local do benchmark

Foi calculado o tempo que leva para:

1.  Travar o mutex;
2.  Aplicar o dado;
3.  Destravar o mutex.

Isto foi feito na função `thread_data_apply_values()`.

# Resultados

Não há muito o que comentar sobre os timing da versão com threads. Em 
média, o tempo que leva para completar a operação é de algumas centenas
de nanosegundos: média de 600ns; mediana de 432ns; moda trimodal de 907ns, 437ns e 392ns; desvio padrão de 292ns, máximo de 2100ns, minimo de 139ns. 

Mesmo assim é de notar como, em geral, o timing oscila dentre 900ns e 400ns.

Certamente é a forma mais rápida dentre as duas.

### Histograma

Os timings se agrupam em dois principais grupos: dentre 303ns à 467ns e 795ns à 959ns, que correspondem as três modas.

### Diagrama de Impulsos

Os timings oscilam periodicamente entre as três modas, e apresentam menos ilhas de estabilidade do que o `pipe_problematic`.

# Método

O benchmark foi realizado em um computador de 8GiB RAM DDR3, processador
Pentium G3220 (2 núcleos) @ 2.9GHz, em sistema nativo Debian 12 Bookworm,
Linux 6.6.13, GCC 12.2.0, glibc 2.36. O benchmark for rodado por dez
minutos. Foi utilizado o `clock_gettime()`, 900 pontos foram gerados.


O programa foi compilado da seguinte forma:

```
$ gcc -std=c11 -Wall -Wextra -DTIMING -o conveyor_thread conveyor_thread.c conveyor_shared.c -lpthread -lrt
```

# Dados Brutos

```
2: 0.000002100
1: 0.000000141
2: 0.000000467
1: 0.000000344
2: 0.000000271
2: 0.000000391
1: 0.000000393
2: 0.000000267
2: 0.000000389
1: 0.000000395
2: 0.000000231
2: 0.000000380
1: 0.000000386
2: 0.000000139
2: 0.000000429
1: 0.000000421
2: 0.000000192
2: 0.000000430
1: 0.000000393
2: 0.000000179
2: 0.000000430
1: 0.000000385
2: 0.000000199
2: 0.000000377
1: 0.000000395
2: 0.000000158
2: 0.000000932
1: 0.000000957
2: 0.000000647
2: 0.000000958
1: 0.000000421
2: 0.000000221
2: 0.000000957
1: 0.000000435
2: 0.000000251
2: 0.000000977
1: 0.000000947
2: 0.000000812
2: 0.000000972
1: 0.000001008
2: 0.000000867
2: 0.000000937
1: 0.000000399
2: 0.000000216
2: 0.000000958
1: 0.000000408
2: 0.000000221
2: 0.000000957
1: 0.000000847
2: 0.000000812
2: 0.000000968
1: 0.000000897
2: 0.000000817
2: 0.000000957
1: 0.000000898
2: 0.000000857
2: 0.000000932
1: 0.000000893
2: 0.000000591
2: 0.000000957
1: 0.000000912
2: 0.000000867
2: 0.000000927
1: 0.000000887
2: 0.000000225
2: 0.000000378
1: 0.000000897
2: 0.000000251
2: 0.000000430
1: 0.000000887
2: 0.000000217
2: 0.000000379
1: 0.000000897
2: 0.000000216
2: 0.000000429
1: 0.000000270
2: 0.000000217
2: 0.000000427
1: 0.000000268
2: 0.000000219
2: 0.000000386
1: 0.000000272
2: 0.000000225
2: 0.000000957
1: 0.000000273
2: 0.000000257
2: 0.000000933
1: 0.000000273
2: 0.000000253
2: 0.000000385
1: 0.000000272
2: 0.000000220
2: 0.000000433
1: 0.000000274
2: 0.000000221
2: 0.000000927
1: 0.000000907
2: 0.000000822
2: 0.000000967
1: 0.000000274
2: 0.000000217
2: 0.000000429
1: 0.000000276
2: 0.000000220
2: 0.000000988
1: 0.000000274
2: 0.000000255
2: 0.000000982
1: 0.000000271
2: 0.000000219
2: 0.000001007
1: 0.000000897
2: 0.000000817
2: 0.000000992
1: 0.000000271
2: 0.000000218
2: 0.000000378
1: 0.000000902
2: 0.000000817
2: 0.000000932
1: 0.000000897
2: 0.000000817
2: 0.000000957
1: 0.000000897
2: 0.000000812
2: 0.000000431
1: 0.000000932
2: 0.000000842
2: 0.000001002
1: 0.000000892
2: 0.000000817
2: 0.000000384
1: 0.000000268
2: 0.000000244
2: 0.000001017
1: 0.000000892
2: 0.000000219
2: 0.000000382
1: 0.000000897
2: 0.000000222
2: 0.000000430
1: 0.000000273
2: 0.000000219
2: 0.000000437
1: 0.000000273
2: 0.000000852
2: 0.000000429
1: 0.000000272
2: 0.000000220
2: 0.000001027
1: 0.000000882
2: 0.000000228
2: 0.000000386
1: 0.000000892
2: 0.000000227
2: 0.000001012
1: 0.000000897
2: 0.000000253
2: 0.000000431
1: 0.000000947
2: 0.000000827
2: 0.000000389
1: 0.000000273
2: 0.000000252
2: 0.000000434
1: 0.000000271
2: 0.000000218
2: 0.000000429
1: 0.000000273
2: 0.000000227
2: 0.000000431
1: 0.000000273
2: 0.000000222
2: 0.000000386
1: 0.000000273
2: 0.000000222
2: 0.000000391
1: 0.000000274
2: 0.000000226
2: 0.000000942
1: 0.000000271
2: 0.000000227
2: 0.000000434
1: 0.000000271
2: 0.000000226
2: 0.000001008
1: 0.000000897
2: 0.000000847
2: 0.000000429
1: 0.000000275
2: 0.000000218
2: 0.000000430
1: 0.000000272
2: 0.000000235
2: 0.000000437
1: 0.000000272
2: 0.000000222
2: 0.000000431
1: 0.000000892
2: 0.000000847
2: 0.000000390
1: 0.000000892
2: 0.000000832
2: 0.000000429
1: 0.000000897
2: 0.000000501
2: 0.000000429
1: 0.000000897
2: 0.000000255
2: 0.000000429
1: 0.000000892
2: 0.000000219
2: 0.000000436
1: 0.000000892
2: 0.000000218
2: 0.000000431
1: 0.000000272
2: 0.000000255
2: 0.000000387
1: 0.000000892
2: 0.000000218
2: 0.000000429
1: 0.000000897
2: 0.000000236
2: 0.000000430
1: 0.000000917
2: 0.000000222
2: 0.000000431
1: 0.000000922
2: 0.000000221
2: 0.000000435
1: 0.000000997
2: 0.000000227
2: 0.000000433
1: 0.000000917
2: 0.000000263
2: 0.000000390
1: 0.000000937
2: 0.000000227
2: 0.000000429
1: 0.000000917
2: 0.000000222
2: 0.000000435
1: 0.000000290
2: 0.000000222
2: 0.000000383
1: 0.000000972
2: 0.000000811
2: 0.000000947
1: 0.000000282
2: 0.000000867
2: 0.000000947
1: 0.000000273
2: 0.000000847
2: 0.000000957
1: 0.000000933
2: 0.000000817
2: 0.000000957
1: 0.000000897
2: 0.000000872
2: 0.000000947
1: 0.000000887
2: 0.000000837
2: 0.000000430
1: 0.000000892
2: 0.000000942
2: 0.000000442
1: 0.000000892
2: 0.000000857
2: 0.000000932
1: 0.000000275
2: 0.000001023
2: 0.000000933
1: 0.000000897
2: 0.000000313
2: 0.000000390
1: 0.000000887
2: 0.000000321
2: 0.000000377
1: 0.000001143
2: 0.000000549
2: 0.000000430
1: 0.000000903
2: 0.000000353
2: 0.000000432
1: 0.000000897
2: 0.000000362
2: 0.000000385
1: 0.000000892
2: 0.000000373
2: 0.000000384
1: 0.000000892
2: 0.000000391
2: 0.000000425
1: 0.000000897
2: 0.000000566
2: 0.000000385
1: 0.000000903
2: 0.000000328
2: 0.000000426
1: 0.000000892
2: 0.000000337
2: 0.000000385
1: 0.000000892
2: 0.000000403
2: 0.000000977
1: 0.000000903
2: 0.000000324
2: 0.000001008
1: 0.000000922
2: 0.000000343
2: 0.000000927
1: 0.000000276
2: 0.000000366
2: 0.000000423
1: 0.000000897
2: 0.000000408
2: 0.000000952
1: 0.000000932
2: 0.000000383
2: 0.000000429
1: 0.000000897
2: 0.000000379
2: 0.000000377
1: 0.000000283
2: 0.000000533
2: 0.000000988
1: 0.000000273
2: 0.000000381
2: 0.000000432
1: 0.000000897
2: 0.000000927
2: 0.000000957
1: 0.000000897
2: 0.000001027
2: 0.000000957
1: 0.000000892
2: 0.000000369
2: 0.000000957
1: 0.000000887
2: 0.000000428
2: 0.000000942
1: 0.000000917
2: 0.000000392
2: 0.000000386
1: 0.000000892
2: 0.000000385
2: 0.000000385
1: 0.000000277
2: 0.000000393
2: 0.000000384
1: 0.000000892
2: 0.000000386
2: 0.000000434
1: 0.000000271
2: 0.000000263
2: 0.000000463
1: 0.000000272
2: 0.000000341
2: 0.000000432
1: 0.000000273
2: 0.000000917
2: 0.000000430
1: 0.000000272
2: 0.000000434
2: 0.000000377
1: 0.000000923
2: 0.000000401
2: 0.000000432
1: 0.000000271
2: 0.000000502
2: 0.000000962
1: 0.000000897
2: 0.000000447
2: 0.000000942
1: 0.000000312
2: 0.000000366
2: 0.000000962
1: 0.000000892
2: 0.000000394
2: 0.000000927
1: 0.000000892
2: 0.000000417
2: 0.000000957
1: 0.000001038
2: 0.000000406
2: 0.000000957
1: 0.000000892
2: 0.000000395
2: 0.000000942
1: 0.000000997
2: 0.000000441
2: 0.000000957
1: 0.000000892
2: 0.000000432
2: 0.000000978
1: 0.000000997
2: 0.000000437
2: 0.000000957
1: 0.000000892
2: 0.000000398
2: 0.000000383
1: 0.000001023
2: 0.000000384
2: 0.000001168
1: 0.000000309
2: 0.000000408
2: 0.000000957
1: 0.000000271
2: 0.000000453
2: 0.000000409
1: 0.000000272
2: 0.000000403
2: 0.000000391
1: 0.000000311
2: 0.000000427
2: 0.000000377
1: 0.000000278
2: 0.000000455
2: 0.000000982
1: 0.000000902
2: 0.000000448
2: 0.000000380
1: 0.000000278
2: 0.000000436
2: 0.000000385
1: 0.000000275
2: 0.000000385
2: 0.000000424
1: 0.000000270
2: 0.000000392
2: 0.000000383
1: 0.000000273
2: 0.000000540
2: 0.000000391
1: 0.000000276
2: 0.000000405
2: 0.000000377
1: 0.000000319
2: 0.000000413
2: 0.000000429
1: 0.000000276
2: 0.000000395
2: 0.000000957
1: 0.000000272
2: 0.000000385
2: 0.000000957
1: 0.000000273
2: 0.000000393
2: 0.000000972
1: 0.000000313
2: 0.000000442
2: 0.000000972
1: 0.000000273
2: 0.000000411
2: 0.000000429
1: 0.000000274
2: 0.000000400
2: 0.000000962
1: 0.000000314
2: 0.000000402
2: 0.000000958
1: 0.000000317
2: 0.000000444
2: 0.000000947
1: 0.000000892
2: 0.000000453
2: 0.000000978
1: 0.000000892
2: 0.000000555
2: 0.000000958
1: 0.000000897
2: 0.000000419
2: 0.000000927
1: 0.000000987
2: 0.000000419
2: 0.000000962
1: 0.000000898
2: 0.000000525
2: 0.000000957
1: 0.000001043
2: 0.000000386
2: 0.000000377
1: 0.000001002
2: 0.000000392
2: 0.000000431
1: 0.000000957
2: 0.000000430
2: 0.000000932
1: 0.000000275
2: 0.000000438
2: 0.000000390
1: 0.000000282
2: 0.000000386
2: 0.000000386
1: 0.000000882
2: 0.000000377
2: 0.000001017
1: 0.000000274
2: 0.000000423
2: 0.000000947
1: 0.000000892
2: 0.000000424
2: 0.000000377
1: 0.000000998
2: 0.000000425
2: 0.000000436
1: 0.000000893
2: 0.000000932
2: 0.000000430
1: 0.000000902
2: 0.000000393
2: 0.000001007
1: 0.000000892
2: 0.000000387
2: 0.000000962
1: 0.000000902
2: 0.000001033
2: 0.000000967
1: 0.000000907
2: 0.000000917
2: 0.000000982
1: 0.000000887
2: 0.000000433
2: 0.000000377
1: 0.000000922
2: 0.000000394
2: 0.000000927
1: 0.000000892
2: 0.000000942
2: 0.000000429
1: 0.000000892
2: 0.000000422
2: 0.000001033
1: 0.000001048
2: 0.000000429
2: 0.000001017
1: 0.000000912
2: 0.000000480
2: 0.000000393
1: 0.000000897
2: 0.000000444
2: 0.000000379
1: 0.000000897
2: 0.000000393
2: 0.000000430
1: 0.000000897
2: 0.000000424
2: 0.000000376
1: 0.000000892
2: 0.000000393
2: 0.000000431
1: 0.000000897
2: 0.000000377
2: 0.000000439
1: 0.000000892
2: 0.000000393
2: 0.000000435
1: 0.000000897
2: 0.000000386
2: 0.000000429
1: 0.000000882
2: 0.000000385
2: 0.000000392
1: 0.000000892
2: 0.000000437
2: 0.000000431
1: 0.000000897
2: 0.000000386
2: 0.000000386
1: 0.000000284
2: 0.000000394
2: 0.000000387
1: 0.000000274
2: 0.000000386
2: 0.000000957
1: 0.000000274
2: 0.000000386
2: 0.000000436
1: 0.000000274
2: 0.000000396
2: 0.000000927
1: 0.000000274
2: 0.000000443
2: 0.000000987
1: 0.000000284
2: 0.000000391
2: 0.000001013
1: 0.000000922
2: 0.000000437
2: 0.000000987
1: 0.000000912
2: 0.000000431
2: 0.000000987
1: 0.000000947
2: 0.000000482
2: 0.000000932
1: 0.000000912
2: 0.000000430
2: 0.000000998
1: 0.000000892
2: 0.000000392
2: 0.000000962
1: 0.000000892
2: 0.000000390
2: 0.000000968
1: 0.000000942
2: 0.000000967
2: 0.000000958
1: 0.000000892
2: 0.000000937
2: 0.000000918
1: 0.000000933
2: 0.000000933
2: 0.000000963
1: 0.000000892
2: 0.000000402
2: 0.000000385
1: 0.000000892
2: 0.000000395
2: 0.000000385
1: 0.000000892
2: 0.000000393
2: 0.000000428
1: 0.000000932
2: 0.000000437
2: 0.000000387
1: 0.000000927
2: 0.000000386
2: 0.000000424
1: 0.000000923
2: 0.000000387
2: 0.000000429
1: 0.000000902
2: 0.000000391
2: 0.000000430
1: 0.000001152
2: 0.000000947
2: 0.000000429
1: 0.000000892
2: 0.000000386
2: 0.000000385
1: 0.000000892
2: 0.000000383
2: 0.000000958
1: 0.000000957
2: 0.000000392
2: 0.000000429
1: 0.000000962
2: 0.000000942
2: 0.000000927
1: 0.000000322
2: 0.000000927
2: 0.000000957
1: 0.000000316
2: 0.000000382
2: 0.000000962
1: 0.000000897
2: 0.000000393
2: 0.000000952
1: 0.000000269
2: 0.000000397
2: 0.000000927
1: 0.000000272
2: 0.000000947
2: 0.000000958
1: 0.000000272
2: 0.000000927
2: 0.000000932
1: 0.000000274
2: 0.000000932
2: 0.000000922
1: 0.000000271
2: 0.000000942
2: 0.000000932
1: 0.000000271
2: 0.000000386
2: 0.000000957
1: 0.000000311
2: 0.000000385
2: 0.000000983
1: 0.000000276
2: 0.000000997
2: 0.000000389
1: 0.000000277
2: 0.000000394
2: 0.000000398
1: 0.000000897
2: 0.000000393
2: 0.000000376
1: 0.000001147
2: 0.000000383
2: 0.000000378
1: 0.000000927
2: 0.000000385
2: 0.000000386
1: 0.000001043
2: 0.000000375
2: 0.000000430
1: 0.000000892
2: 0.000000398
2: 0.000000385
1: 0.000000897
2: 0.000000431
2: 0.000000386
1: 0.000000892
2: 0.000000390
2: 0.000000430
1: 0.000000897
2: 0.000000393
2: 0.000000430
1: 0.000000897
2: 0.000000392
2: 0.000000957
1: 0.000000892
2: 0.000000436
2: 0.000000958
1: 0.000000892
2: 0.000000392
2: 0.000000932
1: 0.000000897
2: 0.000000391
2: 0.000000962
1: 0.000000270
2: 0.000000385
2: 0.000000977
1: 0.000000907
2: 0.000000398
2: 0.000000385
1: 0.000001148
2: 0.000000932
2: 0.000000957
1: 0.000000274
2: 0.000000438
2: 0.000000962
1: 0.000000315
2: 0.000000492
2: 0.000000967
1: 0.000000277
2: 0.000000401
2: 0.000000957
1: 0.000000274
2: 0.000000428
2: 0.000000932
1: 0.000000276
2: 0.000000383
2: 0.000000958
1: 0.000000897
2: 0.000000385
2: 0.000000967
1: 0.000000322
2: 0.000000386
2: 0.000000447
1: 0.000000892
2: 0.000000394
2: 0.000000434
1: 0.000000907
2: 0.000000429
2: 0.000000423
1: 0.000000897
2: 0.000000441
2: 0.000000431
1: 0.000000271
2: 0.000000440
2: 0.000000439
1: 0.000000887
2: 0.000000440
2: 0.000000430
1: 0.000000912
2: 0.000000391
2: 0.000000431
1: 0.000000907
2: 0.000000387
2: 0.000000437
1: 0.000000967
2: 0.000000942
2: 0.000000392
1: 0.000000967
2: 0.000000426
2: 0.000000437
1: 0.000000275
2: 0.000000496
2: 0.000000390
1: 0.000000897
2: 0.000000978
2: 0.000000431
1: 0.000000932
2: 0.000000942
2: 0.000000389
1: 0.000000958
2: 0.000000499
2: 0.000000430
1: 0.000000947
2: 0.000000427
2: 0.000001003
1: 0.000001137
2: 0.000000977
2: 0.000001028
1: 0.000000897
2: 0.000000399
2: 0.000000430
1: 0.000000992
2: 0.000000401
2: 0.000000429
1: 0.000000882
2: 0.000000397
2: 0.000000430
1: 0.000000897
2: 0.000000402
2: 0.000000390
1: 0.000000907
2: 0.000000942
2: 0.000000385
1: 0.000000892
2: 0.000000393
2: 0.000000430
1: 0.000000272
2: 0.000001293
2: 0.000001028
1: 0.000000271
2: 0.000000962
2: 0.000000384
1: 0.000000274
2: 0.000000377
2: 0.000000437
1: 0.000000275
2: 0.000000384
2: 0.000000394
1: 0.000000897
2: 0.000000460
2: 0.000000432
1: 0.000000274
2: 0.000000391
2: 0.000000433
1: 0.000000276
2: 0.000000433
2: 0.000000425
1: 0.000000898
2: 0.000000386
2: 0.000000386
1: 0.000000892
2: 0.000000399
2: 0.000000432
1: 0.000000892
2: 0.000000448
2: 0.000000429
1: 0.000000907
2: 0.000000382
2: 0.000000438
1: 0.000000892
2: 0.000000397
2: 0.000000429
1: 0.000000912
2: 0.000000431
2: 0.000000430
1: 0.000000897
2: 0.000000424
2: 0.000000434
1: 0.000000968
2: 0.000000962
2: 0.000000952
1: 0.000000897
2: 0.000000942
2: 0.000000977
1: 0.000000902
2: 0.000000399
2: 0.000000430
1: 0.000000892
2: 0.000000399
2: 0.000000430
1: 0.000000892
2: 0.000000386
2: 0.000000395
1: 0.000000987
2: 0.000000442
2: 0.000000433
1: 0.000001218
2: 0.000000394
2: 0.000000475
1: 0.000000892
2: 0.000000426
2: 0.000001022
1: 0.000000907
2: 0.000000430
2: 0.000000390
1: 0.000000907
2: 0.000000403
2: 0.000000439
1: 0.000000932
2: 0.000001137
2: 0.000001023
1: 0.000000937
2: 0.000000395
2: 0.000000497
1: 0.000000292
2: 0.000000433
2: 0.000000441
1: 0.000000395
2: 0.000000429
2: 0.000000431
```
