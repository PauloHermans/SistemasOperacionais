# Local do benchmark

Foi calculado o tempo que leva para:

1.  Travar o mutex;
2.  Aplicar o dado;
3.  Destravar o mutex.

Isto foi feito na função `thread_data_apply_values()`.

# Resultados

Em comparação com a versão de Linux, o `windows_thread` tem uma performance pior. Não só isso,
como há picos muito mais drásticos em comparação com a versão de Linux. O máximo da versão de Linux
foi 2.1µs, com uma média de 600ns e uma das modas de 900ns, já a versão Windows foi: média de 1.2µs, mediana de 1µs, moda de 1µs, 
desvio padrão de 3.4µs, máximo de 60.2µs, mínimo de 100ns.

Por mais que isto possa ser sobre o hardware divergente, não acredito que seja o motivo de uma
diferença tão drástica, principalmente considerando que a maquina Windows tem o hardware superior.

### Histograma

Aqui vemos uma das maiores divergências entre os dois sistemas.

No Linux, há dois picos de atividade, um em baixo consumo de tempo (300ns), e outro em alto consumo de tempo (900ns).
Já no Windows, não há essa bipartição, com um unico foco em 1000ns.

Note que há uma pequena elevação em 600ns, porém é muito menor do que na observada no Linux.

### Diagrama de Impulsos

A falta de divergência anterior é explicada no diagrama de impulsos. Equanto no Linux há um 'grelhado', onde as threads
alternam entre alto uso e baixo uso, no Windows é estável e não oscila. Isso normalmente indicaria que o Windows é levemente melhor caso
a thread seja sensível a mudânças drásticas de tempo, como aplicaçõe em tempo real, mas no Windows há picos de atividade muito mais
drásticos do que no Linux, o que pode causar problemas.

# Método

O benchmark foi realizado em um laptop de 8GiB RAM DDR4, processador
Core i3-1115G4 (2 núcleos, 4 lógicos) @ 3.00GHz, em sistema Windows 11 23H2.
O benchmark for rodade por dez minutos. Foi utilizado o `timespec_get()`,
893 pontos foram gerados.

O programa foi compilado no Linux via MinGW da seguinte forma:

```
$ x86_64-w64-mingw32-gcc -std=c11 -Wall -Wextra -DTIMING -DWINDOWS -D_UCRT -o windows_thread conveyor_thread.c conveyor_shared.c conveyor_shared.h -lpthread -lucrt -static
```

# Dados Brutos

```
1: 0.000000300
2: 0.000000100
2: 0.000000600
1: 0.000000500
2: 0.000000200
2: 0.000000700
1: 0.000001100
2: 0.000000700
2: 0.000000500
1: 0.000000300
2: 0.000000600
2: 0.000000600
1: 0.000000500
2: 0.000000600
2: 0.000001100
1: 0.000001100
2: 0.000000900
2: 0.000000800
1: 0.000000900
2: 0.000000800
2: 0.000000800
1: 0.000000800
2: 0.000001500
2: 0.000000500
1: 0.000001000
2: 0.000000900
2: 0.000001600
1: 0.000001500
2: 0.000001100
2: 0.000001100
1: 0.000045900
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001400
2: 0.000001000
1: 0.000000900
2: 0.000001000
2: 0.000000900
1: 0.000001000
2: 0.000000500
2: 0.000001100
1: 0.000000900
2: 0.000000900
2: 0.000001000
1: 0.000000600
2: 0.000000900
2: 0.000001100
1: 0.000001000
2: 0.000001100
2: 0.000001000
1: 0.000000900
2: 0.000001000
2: 0.000001000
1: 0.000001100
2: 0.000000900
2: 0.000000900
1: 0.000001000
2: 0.000001000
2: 0.000000900
1: 0.000001300
2: 0.000001200
2: 0.000001000
1: 0.000001000
2: 0.000001300
2: 0.000002000
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000000700
2: 0.000000500
2: 0.000001000
1: 0.000000500
2: 0.000001000
2: 0.000000900
1: 0.000000900
2: 0.000001000
2: 0.000001000
1: 0.000001700
2: 0.000001000
2: 0.000001000
1: 0.000001300
2: 0.000001300
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001100
2: 0.000000900
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000000900
2: 0.000000900
2: 0.000001000
1: 0.000000700
2: 0.000000700
2: 0.000000900
1: 0.000000900
2: 0.000001000
2: 0.000000800
1: 0.000001300
2: 0.000001100
2: 0.000000900
1: 0.000000900
2: 0.000001000
2: 0.000000600
1: 0.000000700
2: 0.000000900
2: 0.000000800
1: 0.000001000
2: 0.000000800
2: 0.000000500
1: 0.000001000
2: 0.000001000
2: 0.000000800
1: 0.000001400
2: 0.000001000
2: 0.000000500
1: 0.000001000
2: 0.000001000
2: 0.000000500
1: 0.000001000
2: 0.000001400
2: 0.000000600
1: 0.000001100
2: 0.000000900
2: 0.000001700
1: 0.000001100
2: 0.000000900
2: 0.000000700
1: 0.000001100
2: 0.000001000
2: 0.000000900
1: 0.000001000
2: 0.000000500
2: 0.000000700
1: 0.000001000
2: 0.000001000
2: 0.000000600
1: 0.000001000
2: 0.000001100
2: 0.000001000
1: 0.000000900
2: 0.000000500
2: 0.000001100
1: 0.000001400
2: 0.000001100
2: 0.000001200
1: 0.000001000
2: 0.000001000
2: 0.000000700
1: 0.000001000
2: 0.000000900
2: 0.000001100
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001200
2: 0.000001100
2: 0.000001200
1: 0.000001000
2: 0.000001100
2: 0.000001300
1: 0.000001000
2: 0.000000800
2: 0.000001000
1: 0.000000800
2: 0.000000700
2: 0.000001000
1: 0.000000500
2: 0.000000500
2: 0.000000600
1: 0.000000500
2: 0.000000600
2: 0.000000500
1: 0.000000500
2: 0.000000600
2: 0.000000500
1: 0.000000600
2: 0.000000500
2: 0.000000700
1: 0.000000500
2: 0.000000700
2: 0.000000700
1: 0.000000700
2: 0.000000600
2: 0.000000500
1: 0.000000600
2: 0.000000500
2: 0.000000600
1: 0.000000600
2: 0.000000500
2: 0.000000500
1: 0.000000600
2: 0.000000500
2: 0.000000500
1: 0.000000600
2: 0.000000500
2: 0.000000500
1: 0.000000600
2: 0.000000700
2: 0.000000500
1: 0.000000500
2: 0.000000500
2: 0.000000500
1: 0.000000500
2: 0.000000500
2: 0.000000600
1: 0.000000600
2: 0.000000500
2: 0.000000600
1: 0.000000600
2: 0.000000500
2: 0.000000600
1: 0.000000700
2: 0.000000600
2: 0.000000700
1: 0.000000600
2: 0.000001000
2: 0.000000700
1: 0.000001000
2: 0.000000900
2: 0.000001000
1: 0.000000600
2: 0.000001000
2: 0.000001400
1: 0.000000900
2: 0.000001000
2: 0.000001000
1: 0.000000900
2: 0.000001100
2: 0.000000900
1: 0.000001300
2: 0.000001000
2: 0.000000900
1: 0.000001000
2: 0.000001100
2: 0.000001000
1: 0.000000900
2: 0.000000900
2: 0.000000900
1: 0.000001000
2: 0.000001100
2: 0.000001100
1: 0.000054300
2: 0.000001000
2: 0.000000800
1: 0.000001000
2: 0.000000900
2: 0.000000600
1: 0.000000600
2: 0.000000600
2: 0.000000500
1: 0.000000500
2: 0.000000500
2: 0.000000500
1: 0.000000600
2: 0.000000600
2: 0.000000600
1: 0.000001300
2: 0.000000900
2: 0.000000900
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000000600
2: 0.000001000
2: 0.000001300
1: 0.000001000
2: 0.000000600
2: 0.000001000
1: 0.000001100
2: 0.000000900
2: 0.000001000
1: 0.000001000
2: 0.000001100
2: 0.000000600
1: 0.000001000
2: 0.000000900
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001100
1: 0.000001000
2: 0.000001000
2: 0.000001100
1: 0.000000900
2: 0.000001000
2: 0.000001400
1: 0.000000900
2: 0.000001000
2: 0.000001000
1: 0.000001300
2: 0.000001000
2: 0.000000900
1: 0.000001400
2: 0.000000900
2: 0.000001100
1: 0.000000900
2: 0.000000900
2: 0.000001500
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001200
2: 0.000000900
1: 0.000001300
2: 0.000000900
2: 0.000001000
1: 0.000001300
2: 0.000001000
2: 0.000000900
1: 0.000000800
2: 0.000000900
2: 0.000001000
1: 0.000001300
2: 0.000001000
2: 0.000001100
1: 0.000001000
2: 0.000001300
2: 0.000001400
1: 0.000001100
2: 0.000001100
2: 0.000001000
1: 0.000001200
2: 0.000001300
2: 0.000001000
1: 0.000001100
2: 0.000001200
2: 0.000001000
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001100
2: 0.000000900
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001300
2: 0.000001700
2: 0.000001000
1: 0.000001000
2: 0.000000900
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001100
1: 0.000001000
2: 0.000001000
2: 0.000001200
1: 0.000000900
2: 0.000001100
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001300
2: 0.000001100
1: 0.000000500
2: 0.000048000
2: 0.000001000
1: 0.000001300
2: 0.000000900
2: 0.000001000
1: 0.000001400
2: 0.000001000
2: 0.000001100
1: 0.000000900
2: 0.000000900
2: 0.000001500
1: 0.000001100
2: 0.000001000
2: 0.000001100
1: 0.000000500
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001100
1: 0.000001200
2: 0.000001100
2: 0.000000900
1: 0.000001000
2: 0.000000900
2: 0.000001000
1: 0.000000900
2: 0.000001000
1: 0.000003100
2: 0.000001100
2: 0.000001000
1: 0.000001300
2: 0.000001000
2: 0.000001100
1: 0.000001000
2: 0.000001200
2: 0.000001300
1: 0.000000900
2: 0.000001000
2: 0.000001500
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000000900
2: 0.000001000
1: 0.000000900
2: 0.000001300
2: 0.000001000
1: 0.000001000
2: 0.000001400
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000000700
1: 0.000000800
2: 0.000000600
2: 0.000001200
1: 0.000001000
2: 0.000000900
2: 0.000001100
1: 0.000001100
2: 0.000000900
2: 0.000001100
1: 0.000001500
2: 0.000001000
2: 0.000000900
1: 0.000001000
2: 0.000000800
2: 0.000000500
1: 0.000000600
2: 0.000000900
2: 0.000001100
1: 0.000001300
2: 0.000001100
2: 0.000000800
1: 0.000001000
2: 0.000001000
2: 0.000000900
1: 0.000001000
2: 0.000000500
2: 0.000001100
1: 0.000001100
2: 0.000001200
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000000600
1: 0.000001000
2: 0.000001100
2: 0.000001200
1: 0.000000500
2: 0.000000800
2: 0.000000900
1: 0.000000600
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000000900
1: 0.000001000
2: 0.000001400
2: 0.000001000
1: 0.000001400
2: 0.000000900
2: 0.000001000
1: 0.000001000
2: 0.000001100
2: 0.000001000
1: 0.000001000
2: 0.000001100
2: 0.000001100
1: 0.000000600
2: 0.000001000
2: 0.000001000
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001100
2: 0.000001100
2: 0.000001100
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001400
2: 0.000001400
1: 0.000060200
2: 0.000001100
2: 0.000001000
1: 0.000001400
2: 0.000001000
2: 0.000001100
1: 0.000001100
2: 0.000001100
2: 0.000000900
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001300
2: 0.000001400
2: 0.000001000
1: 0.000001400
2: 0.000001100
2: 0.000001000
1: 0.000001000
2: 0.000000900
2: 0.000001300
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000000900
2: 0.000001000
1: 0.000001000
2: 0.000001100
2: 0.000001000
1: 0.000000900
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000000900
1: 0.000001000
2: 0.000001300
2: 0.000001000
1: 0.000001000
2: 0.000001100
2: 0.000001100
1: 0.000001300
2: 0.000000900
2: 0.000001100
1: 0.000001000
2: 0.000000600
2: 0.000001200
1: 0.000000900
2: 0.000001100
2: 0.000001300
1: 0.000001000
2: 0.000000900
2: 0.000001100
1: 0.000001000
2: 0.000001100
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001400
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001300
2: 0.000001100
2: 0.000000900
1: 0.000001000
2: 0.000001100
2: 0.000001000
1: 0.000001100
2: 0.000000900
2: 0.000001100
1: 0.000001100
2: 0.000001000
2: 0.000000800
1: 0.000001100
2: 0.000001200
2: 0.000001500
1: 0.000001200
2: 0.000001000
2: 0.000001000
1: 0.000001100
2: 0.000000900
2: 0.000000900
1: 0.000001000
2: 0.000001100
2: 0.000001100
1: 0.000000900
2: 0.000000900
2: 0.000000600
1: 0.000001000
2: 0.000001500
2: 0.000000900
1: 0.000000900
2: 0.000001100
2: 0.000001000
1: 0.000001200
2: 0.000001100
2: 0.000001100
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001200
2: 0.000001300
2: 0.000001000
1: 0.000001300
2: 0.000001000
2: 0.000001100
1: 0.000001100
2: 0.000001000
2: 0.000001100
1: 0.000001100
2: 0.000001200
2: 0.000001100
1: 0.000001200
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001100
1: 0.000001400
2: 0.000001500
2: 0.000001000
1: 0.000001000
2: 0.000001100
2: 0.000001200
1: 0.000001100
2: 0.000001400
2: 0.000001100
1: 0.000001000
2: 0.000001100
2: 0.000000600
1: 0.000000900
2: 0.000001100
2: 0.000001600
1: 0.000001100
2: 0.000000900
2: 0.000001100
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001100
2: 0.000001000
2: 0.000001100
1: 0.000001100
2: 0.000001100
2: 0.000001100
1: 0.000001000
2: 0.000001200
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001300
1: 0.000001100
2: 0.000001500
2: 0.000001000
1: 0.000000900
2: 0.000001100
2: 0.000000900
1: 0.000000900
2: 0.000001000
2: 0.000001100
1: 0.000001400
2: 0.000001000
2: 0.000001200
1: 0.000000900
2: 0.000001100
2: 0.000001000
1: 0.000001300
2: 0.000000700
2: 0.000001100
1: 0.000001000
2: 0.000001700
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001100
1: 0.000001100
2: 0.000001200
2: 0.000001000
1: 0.000001400
2: 0.000001100
2: 0.000001000
1: 0.000001100
2: 0.000001200
2: 0.000001100
1: 0.000001200
2: 0.000001400
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001100
2: 0.000001000
2: 0.000000600
1: 0.000001100
2: 0.000001100
2: 0.000001000
1: 0.000001200
2: 0.000001200
2: 0.000001300
1: 0.000001000
2: 0.000000800
2: 0.000001000
1: 0.000001100
2: 0.000001000
1: 0.000001000
2: 0.000001100
2: 0.000000900
1: 0.000000500
2: 0.000001000
2: 0.000001100
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001100
2: 0.000001100
2: 0.000001000
1: 0.000001000
2: 0.000001300
2: 0.000001000
1: 0.000000900
2: 0.000001300
2: 0.000001000
1: 0.000001100
2: 0.000000900
2: 0.000001000
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001100
2: 0.000001400
1: 0.000001000
2: 0.000001100
2: 0.000001200
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000000900
2: 0.000000900
2: 0.000001000
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001200
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001400
2: 0.000001000
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001300
2: 0.000000900
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001300
2: 0.000001000
1: 0.000001200
2: 0.000001000
2: 0.000001100
1: 0.000001000
2: 0.000001000
2: 0.000001100
1: 0.000001300
2: 0.000001000
2: 0.000001100
1: 0.000001100
2: 0.000001400
2: 0.000001300
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001100
2: 0.000001000
2: 0.000000900
1: 0.000001000
2: 0.000001100
2: 0.000001000
1: 0.000000900
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001100
1: 0.000001100
2: 0.000001000
2: 0.000001100
1: 0.000001000
2: 0.000001000
2: 0.000000900
1: 0.000001000
2: 0.000001100
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000000900
2: 0.000001100
2: 0.000001000
1: 0.000001000
2: 0.000001100
2: 0.000001000
1: 0.000001100
2: 0.000001000
2: 0.000001300
1: 0.000001100
2: 0.000001300
2: 0.000001500
1: 0.000000900
2: 0.000001100
2: 0.000001000
1: 0.000001000
2: 0.000001300
2: 0.000001000
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000000900
2: 0.000001000
1: 0.000000900
2: 0.000001000
2: 0.000001200
1: 0.000001000
2: 0.000001200
2: 0.000001100
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001100
2: 0.000001000
2: 0.000000900
1: 0.000000900
2: 0.000001300
2: 0.000000900
1: 0.000001000
2: 0.000001000
2: 0.000001200
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001300
2: 0.000001100
1: 0.000001100
2: 0.000001100
2: 0.000001100
1: 0.000001100
2: 0.000001400
2: 0.000000900
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001400
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001100
1: 0.000000900
2: 0.000001100
2: 0.000001100
1: 0.000001300
2: 0.000000700
2: 0.000000600
1: 0.000000900
2: 0.000001000
2: 0.000001000
1: 0.000001100
2: 0.000001000
2: 0.000001000
1: 0.000001000
2: 0.000001000
2: 0.000001100
1: 0.000001100
2: 0.000001000
2: 0.000000700
```
